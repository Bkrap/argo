(()=>{var __webpack_modules__={"./src/js/parseExternalNews/parseExternalNews.js":
/*!*******************************************************!*\
  !*** ./src/js/parseExternalNews/parseExternalNews.js ***!
  \*******************************************************/(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{eval("const { Readability } = __webpack_require__(/*! @mozilla/readability */ \"./node_modules/@mozilla/readability/index.js\");\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  let finalResults = [];\r\n  let category = generic_ajax_object.tags;\r\n\r\n  let url = 'https://newsapi.org/v2/top-headlines?' +\r\n      'country=us&' +\r\n      'category=business&' +\r\n      'sortBy=publishedAt&' +\r\n      'pageSize='+ generic_ajax_object.fetch_daily +'&' +\r\n      'apiKey=' + generic_ajax_object.newsApiKey;\r\n\r\n  // console.log(url);\r\n\r\n  if (generic_ajax_object.fetch_news) {\r\n    async function fetchArticles() {\r\n      try {\r\n        const r1 = await jQuery.ajax({\r\n          url: url,\r\n          method: 'GET',\r\n        });\r\n\r\n        let results = r1.articles;\r\n\r\n        await Promise.all(results.map(async (result) => {\r\n          try {\r\n            const r2 = await jQuery.ajax({\r\n              url: result.url,\r\n              method: 'GET',\r\n            });\r\n\r\n            let $article = jQuery(r2);\r\n\r\n            const domParser = new DOMParser();\r\n            const doc = domParser.parseFromString(r2, 'text/html');\r\n\r\n            let articleContent = new Readability(doc).parse();\r\n            let articleContentRaw = articleContent.textContent;\r\n\r\n            finalResults.push({\r\n              description: result.description,\r\n              publishedAt: result.publishedAt,\r\n              title: result.title,\r\n              url: result.url,\r\n              urlToImage: result.urlToImage,\r\n              content: articleContentRaw.replace(/\\n/g, '\\n\\n') + '\\n\\n' + 'SOURCE: ' + '<a href='+ result.url + ' target=\"_blank\">' + result.source.name + '</a>',\r\n            });\r\n          } catch (error) {\r\n            if (error.status === 403) {\r\n              console.log('Skipped article due to 403 error:', result.url);\r\n            } else {\r\n              console.log('Error fetching article:', error);\r\n            }\r\n          }\r\n        }));\r\n\r\n        // console.log(finalResults);\r\n\r\n        var formData = {\r\n          action: 'parse_external_news_api',\r\n          finalResults: finalResults,\r\n        };\r\n\r\n        jQuery.ajax({\r\n          type: 'POST',\r\n          url: generic_ajax_object.ajax_url,\r\n          data: formData,\r\n          async: false, // Make the request synchronous\r\n          success: function(data) {\r\n            jQuery(document)\r\n              .ajaxStart(function () {\r\n                //ajax request went so show the loading image\r\n                // loadingWheel.show();\r\n              })\r\n              .ajaxStop(function () {\r\n                //got response so hide the loading image\r\n                //    loadingWheel.hide();\r\n              });\r\n          },\r\n          error: function(request, status, error) {\r\n            console.log(request);\r\n            console.log(error);\r\n            alert(status);\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.log('Error fetching articles:', error);\r\n      }\r\n    }\r\n\r\n    fetchArticles();\r\n  }\r\n});\n\n//# sourceURL=webpack://webpack/./src/js/parseExternalNews/parseExternalNews.js?")}},__webpack_module_cache__={},deferred;function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,r,n,a)=>{if(!r){var t=1/0;for(l=0;l<deferred.length;l++){for(var[r,n,a]=deferred[l],_=!0,s=0;s<r.length;s++)(!1&a||t>=a)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](r[s])))?r.splice(s--,1):(_=!1,a<t&&(t=a));if(_){deferred.splice(l--,1);var o=n();void 0!==o&&(e=o)}}return e}a=a||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>a;l--)deferred[l]=deferred[l-1];deferred[l]=[r,n,a]},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={parseExternalNews:0};__webpack_require__.O.j=r=>0===e[r];var r=(r,n)=>{var a,t,[_,s,o]=n,l=0;if(_.some((r=>0!==e[r]))){for(a in s)__webpack_require__.o(s,a)&&(__webpack_require__.m[a]=s[a]);if(o)var c=o(__webpack_require__)}for(r&&r(n);l<_.length;l++)t=_[l],__webpack_require__.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return __webpack_require__.O(c)},n=self.webpackChunkwebpack=self.webpackChunkwebpack||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))})();var __webpack_exports__=__webpack_require__.O(void 0,["vendors-node_modules_mozilla_readability_index_js"],(()=>__webpack_require__("./src/js/parseExternalNews/parseExternalNews.js")));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();